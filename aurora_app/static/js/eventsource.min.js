(function(e){"use strict";function t(){this.data={}}function n(){this.listeners=new t}function r(e){setTimeout(function(){throw e},0)}function i(e){this.type=e}function s(e,t){i.call(this,e);this.data=t.data;this.lastEventId=t.lastEventId}function C(e,t){var n=Number(e)||t;return n<T?T:n>N?N:n}function k(e,t,n){try{if(typeof t==="function"){t.call(e,n)}}catch(i){r(i)}}function L(t,r){function W(){B=d;if(_!==null){_.abort();_=null}if(D!==0){clearTimeout(D);D=0}if(P!==0){clearTimeout(P);P=0}A.readyState=d}function X(e){var t=B===p||B===h?_.responseText||"":"";var n=null;if(B===h){var r=f?t!==""?_.getResponseHeader("Content-Type"):"":_.contentType;var o=f?t!==""?_.status:0:200;if(o===200&&r&&w.test(r)){B=p;M=true;O=u;A.readyState=p;n=new i("open");A.dispatchEvent(n);k(A,A.onopen,n);if(B===d){return}}}if(B===p){if(t.length>H){M=true}var a=H-1;var l=t.length;while(++a<l){var E=t[a];if(R===v&&E==="\n"){R=m}else{if(R===v){R=m}if(E==="\r"||E==="\n"){if(U==="data"){j.push(z)}else if(U==="id"){F=z}else if(U==="event"){I=z}else if(U==="retry"){u=C(z,u);O=u;if(T<u){T=u}}else if(U==="retryLimit"){T=C(z,T)}else if(U==="heartbeatTimeout"){N=C(z,N);if(D!==0){clearTimeout(D);D=setTimeout(q,N)}}z="";U="";if(R===m){if(j.length!==0){L=F;if(I===""){I="message"}n=new s(I,{data:j.join("\n"),lastEventId:F});A.dispatchEvent(n);if(I==="message"){k(A,A.onmessage,n)}if(B===d){return}}j.length=0;I=""}R=E==="\r"?v:m}else{if(R===m){R=g}if(R===g){if(E===":"){R=y}else{U+=E}}else if(R===y){if(E!==" "){z+=E}R=b}else if(R===b){z+=E}}}}H=l}if((B===p||B===h)&&(e||H>1024*1024||D===0&&!M)){B=c;_.abort();if(D!==0){clearTimeout(D);D=0}if(O>T){O=T}D=setTimeout(q,O);O=O*2+1;A.readyState=h;n=new i("error");A.dispatchEvent(n);k(A,A.onerror,n)}else{if(D===0){M=false;D=setTimeout(q,N)}}}function V(){X(false)}function $(){X(true)}t=String(t);var o=Boolean(a&&r&&r.withCredentials);var u=C(r?r.retry:NaN,1e3);var T=C(r?r.retryLimit:NaN,3e5);var N=C(r?r.heartbeatTimeout:NaN,45e3);var L=r&&r.lastEventId&&String(r.lastEventId)||"";var A=this;var O=u;var M=false;var _=new l;var D=0;var P=0;var H=0;var B=c;var j=[];var F="";var I="";var q=null;var R=m;var U="";var z="";r=null;if(x){P=setTimeout(function J(){if(_.readyState===3){V()}P=setTimeout(J,500)},0)}q=function(){D=0;if(B!==c){X(false);return}if(navigator.onLine===false){D=setTimeout(q,500);return}if(E&&e.document&&(e.document.readyState==="loading"||e.document.readyState==="interactive")){D=setTimeout(q,100);return}_.onload=_.onerror=$;_.onabort=$;if(S){_.onreadystatechange=V}else{_.onprogress=V}M=false;D=setTimeout(q,N);H=0;B=h;j.length=0;I="";F=L;z="";U="";R=m;var n=t.slice(0,5);if(n!=="data:"&&n!=="blob:"){n=t+((t.indexOf("?",0)===-1?"?":"&")+"lastEventId="+encodeURIComponent(L)+"&r="+String(Math.random()+1).slice(2))}else{n=t}_.open("GET",n,true);_.withCredentials=o;_.responseType="text";if(f){_.setRequestHeader("Accept","text/event-stream")}_.send(null)};n.call(this);this.close=W;this.url=t;this.readyState=h;this.withCredentials=o;this.onopen=null;this.onmessage=null;this.onerror=null;q()}function A(){this.CONNECTING=h;this.OPEN=p;this.CLOSED=d}t.prototype={get:function(e){return this.data[e+"~"]},set:function(e,t){this.data[e+"~"]=t},"delete":function(e){delete this.data[e+"~"]}};n.prototype={dispatchEvent:function(e){var t=String(e.type);var n=this.listeners;var i=n.get(t);if(!i){return}var s=i.length;var o=-1;var u=null;while(++o<s){u=i[o];try{u.call(this,e)}catch(a){r(a)}}},addEventListener:function(e,t){e=String(e);var n=this.listeners;var r=n.get(e);if(!r){r=[];n.set(e,r)}var i=r.length;while(--i>=0){if(r[i]===t){return}}r.push(t)},removeEventListener:function(e,t){e=String(e);var n=this.listeners;var r=n.get(e);if(!r){return}var i=r.length;var s=[];var o=-1;while(++o<i){if(r[o]!==t){s.push(r[o])}}if(s.length===0){n["delete"](e)}else{n.set(e,s)}}};s.prototype=i.prototype;var o=e.XMLHttpRequest;var u=e.XDomainRequest;var a=Boolean(o&&(new o).withCredentials!==undefined);var f=a;var l=a?o:u;var c=-1;var h=0;var p=1;var d=2;var v=3;var m=4;var g=5;var y=6;var b=7;var w=/^text\/event\-stream;?(\s*charset\=utf\-8)?$/i;var E=/AppleWebKit\/5([0-2][0-9]|3[0-4])[\.\s\w]/.test(navigator.userAgent);var S=Boolean(o&&(new o).sendAsBinary!==undefined);var x=Object.prototype.toString.call(e.opera)==="[object Opera]";var T=1;var N=18e6;A.prototype=n.prototype;L.prototype=new A;A.call(L);if(l){e.EventSource=L}})(this)